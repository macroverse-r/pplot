% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pp_plot_scatter.r
\name{pp_plot_scatter}
\alias{pp_plot_scatter}
\title{Create Scatter Plots with Advanced Visualization Options}
\usage{
pp_plot_scatter(
  data,
  y_axis = NULL,
  x_axis = NULL,
  color = "Subregion",
  ISO = "Both",
  interpolation = FALSE,
  spline_bw = NULL,
  r_squared = 0,
  r_squared_pos = "flexible",
  label_nudge = 0.005,
  highlight_zero = FALSE,
  filename = NULL,
  print = TRUE,
  legend = TRUE,
  reference = TRUE,
  title = NULL,
  subtitle = NULL,
  subfig_title = FALSE,
  verbose = TRUE,
  debug = FALSE,
  no_other = TRUE,
  size = 4,
  theme = list(base_size = 16),
  common_var = TRUE,
  title_scale = 1.15,
  title_face = "bold",
  subtitle_scale = 1,
  ref_scale = 1,
  bg = "transparent"
)
}
\arguments{
\item{data}{data.frame that must contain the following columns:
- ISO: ISO 3-letter country codes (required)
- Variable: indicator names (required)
- Value: numeric values (required)
- Country: country names (optional, auto-generated from ISO if missing)
- Reference: source citations (required if reference=TRUE)}

\item{y_axis}{Single string, vector of strings, TRUE, FALSE, or NULL:
- Single string: common y-axis label for all plots
- Vector of strings: individual labels for each plot
- TRUE: use Variable names as labels
- FALSE/NULL: no axis labels
For multi-variable plots, length must match number of plot panels.}

\item{x_axis}{Similar to y_axis, controls x-axis labeling:
- Single string: common x-axis label for all plots
- Vector of strings: individual labels for each plot
- TRUE: use Variable names as labels
- FALSE/NULL: no axis labels}

\item{color}{Controls point coloring scheme:
- "Subregion": colors by geographical subregion
- "Region": colors by continent/major region
- "Center-Periphery": colors by economic classification
- "Hydrocarbon": colors by hydrocarbon exporter/importer status
- list: custom grouping with named groups of countries
- FALSE/NULL: no color grouping (all points gray)
Default is "Subregion".}

\item{ISO}{Controls country label display:
- TRUE: replaces points with ISO codes
- "Both": shows both points and repelled ISO labels
- FALSE/NULL: shows only points
Default is "Both".}

\item{interpolation}{Controls trend line fitting:
- TRUE/"Linear": linear regression line
- "Square": quadratic regression curve
- "Cubic": cubic regression curve
- "Spline": smoothed spline curve
- FALSE: no trend line
Default is FALSE.}

\item{spline_bw}{Numeric value for spline smoothing bandwidth:
- Only used when interpolation="Spline"
- Lower values create more flexible curves
- NULL for automatic bandwidth selection
Default is NULL.}

\item{r_squared}{Controls R-squared statistic display:
- 0: no R-squared display
- 1: shows R-squared value
- 2: shows R-squared and adjusted R-squared
- 3: shows equation and both R-squared values
Default is 0.}

\item{r_squared_pos}{Controls R-squared text position:
- "flexible": automatically chooses best position
- "topleft": fixed top-left position
- "topright": fixed top-right position
- "bottomleft": fixed bottom-left position
- "bottomright": fixed bottom-right position
Default is "flexible".}

\item{label_nudge}{Numeric value for ISO label positioning:
- Controls distance between point and label
- Only used when ISO="Both"
- Larger values increase separation
Default is 0.005.}

\item{highlight_zero}{Logical; whether to add x=0 and y=0 reference lines:
- TRUE: adds both reference lines
- FALSE: no reference lines
Default is FALSE.}

\item{filename}{Character string for saving plots:
- Specify name without extension
- Plots saved as both PNG and PDF in 'img/' directory
- NULL/FALSE for no file output}

\item{print}{Logical; controls plot display:
- TRUE: displays the plot
- FALSE: creates but doesn't display the plot
Default is TRUE.}

\item{legend}{Logical; controls legend display:
- TRUE: includes a legend
- FALSE: omits the legend
Default is TRUE.}

\item{reference}{Logical; controls reference panel:
- TRUE: includes reference citations panel (requires Reference column)
- FALSE: omits reference panel
Default is TRUE.}

\item{title}{Character string for main plot title:
- NULL/FALSE for no title}

\item{subtitle}{Character string for plot subtitle:
- NULL/FALSE for no subtitle}

\item{subfig_title}{Controls subplot titles in multi-variable plots:
- TRUE: uses default titles (pairs of variables)
- FALSE: no subplot titles
- Character vector: custom titles (length must match number of panels)
- Ignored for two-variable plots
Default is TRUE.}

\item{verbose}{Logical; controls information messages:
- TRUE: prints processing information
- FALSE: suppresses information messages
Default is TRUE.}

\item{debug}{Logical; controls debugging output:
- TRUE: prints detailed debugging information
- FALSE: suppresses debugging information
Default is FALSE.}

\item{no_other}{Logical; controls treatment of unclassified countries:
- TRUE: excludes countries not in any color group
- FALSE: includes unclassified countries in gray
Default is TRUE.}

\item{size}{Numeric or NULL; controls plot dimensions:
- 1: small (10x7 inches)
- 2: medium (15x7 inches)
- 3: large (15x10 inches)
- 4: extra large (20x10 inches)
- NULL: auto-sizes based on data}

\item{theme}{List}

\item{common_var}{Controls variable pairing in multi-variable plots:
- TRUE: uses first variable as common x-axis
- Character: specified variable used as common x-axis
- FALSE: sequential pairing of variables
Default is TRUE.}

\item{bg}{character; controls plot background color:
- "transparent": transparent background (default)
- Any valid color string: sets background to that color}
}
\value{
A ggplot2 object containing the scatter plot(s)
}
\description{
Creates scatter plots for comparing two or more variables across countries,
with support for various visual customizations including color grouping,
ISO label placement, trend lines, and statistical annotations.
The function automatically determines the most appropriate plot type
based on the number of variables and specified parameters.
}
\details{
The function automatically selects the appropriate plotting implementation based on
the number of variables:
\itemize{
\item Two variables:
\itemize{
\item Simple scatter plot with optional trend lines
\item Color grouping by region or custom groups
\item Flexible ISO code labeling options
}
\item Multiple variables:
\itemize{
\item Matrix of scatter plots
\item Option for common x-axis variable
\item Consistent scales and formatting across panels
}
}

The function includes multiple features for customization:
\itemize{
\item Automatic axis scaling and formatting
\item Flexible color grouping options
\item Statistical annotations (R-squared, trend lines)
\item Reference panel for data sources
\item Consistent theme across all plot types
}
}
\examples{
# Basic scatter plot with two variables
data <- data.frame(
  ISO = c("FRA", "DEU", "ITA"),
  Variable = rep(c("GDP", "Inflation"), each = 3),
  Value = c(2.1, 1.8, 1.5, 3.2, 2.8, 2.5),
  Reference = "World Bank"
)
pp_plot_scatter(data, y_axis = "Inflation Rate (\%)")

# Scatter plot with color groups and trend line
pp_plot_scatter(data,
               color = "Region",
               interpolation = "Linear",
               r_squared = 2)

# Multiple variables with common x-axis
data_multi <- data.frame(
  ISO = rep(c("FRA", "DEU", "ITA"), 3),
  Variable = rep(c("GDP", "Inflation", "Debt"), each = 3),
  Value = runif(9, 0, 5),
  Reference = "World Bank"
)
pp_plot_scatter(data_multi,
               common_var = "GDP",
               color = "Subregion",
               ISO = "Both")

# Custom color grouping
color_groups <- list(
  "Core" = c("DEU", "FRA"),
  "Periphery" = c("ITA", "ESP")
)
pp_plot_scatter(data,
               color = color_groups,
               highlight_zero = TRUE)

}
\seealso{
\code{\link{pp_plot_series}} for time series plots
\code{\link{pp_plot_bar}} for bar plots
\code{\link{isomapper::im_from_iso}} for ISO code to country name conversion

Other plotting functions: 
\code{\link{pp_plot_bar}()},
\code{\link{pp_plot_combine}()},
\code{\link{pp_plot_series}()}
}
\concept{plotting functions}
