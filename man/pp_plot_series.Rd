% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pp_plot_series.r
\name{pp_plot_series}
\alias{pp_plot_series}
\title{Create Time Series Plots with Multiple Configuration Options}
\usage{
pp_plot_series(
  data,
  y_axis = NULL,
  right_axis = NULL,
  key_dates = NULL,
  area = FALSE,
  by_indicator = TRUE,
  filename = NULL,
  print = TRUE,
  legend = TRUE,
  reference = TRUE,
  title = NULL,
  subtitle = NULL,
  subfig_title = NULL,
  verbose = TRUE,
  debug = FALSE,
  size = NULL,
  theme = list(base_size = 16),
  title_scale = 1.15,
  title_face = "bold",
  subtitle_scale = 1,
  ref_scale = 1,
  bg = "transparent"
)
}
\arguments{
\item{data}{data.frame that must contain the following columns:
- ISO: ISO 3-letter country codes (required)
- Date: dates in Date format (required)
- Variable: indicator names (required)
- Value: numeric values (required)
- Country: country names (optional, auto-generated from ISO if missing)
- Reference: source citations (required if reference=TRUE)}

\item{y_axis}{Single string, vector of strings, TRUE, FALSE, or NULL:
- Single string: common y-axis label for all plots
- Vector of strings: individual labels for each plot/axis
- TRUE: use Variable names as labels
- FALSE/NULL: no axis labels
For dual axis plots, must be vector of length 2 for left and right axes.
For multi-indicator plots, length must match number of indicators.}

\item{right_axis}{controls the right y-axis behavior:
- NULL/FALSE: no right axis (default)
- TRUE: automatically assigns variables to right axis based on scale
- character vector: names of variables to assign to right axis
Only available for plots with 2 or more indicators.
Cannot be used with area=TRUE.}

\item{key_dates}{data.frame for marking significant events:
- Must have exactly 2 columns
- Column 1: event descriptions
- Column 2: corresponding dates in Date format
- Events outside plot date range are automatically filtered
- NULL for no event markers}

\item{area}{logical; if TRUE, creates a stacked area plot:
- Only for single-country, multi-indicator plots
- First variable shown as line on top of stacked areas
- Cannot be used with right_axis=TRUE
Default is FALSE.}

\item{by_indicator}{logical; controls faceting in multi-panel plots:
- TRUE: creates separate panels for each indicator
- FALSE: creates separate panels for each country
- Ignored for single country or single indicator plots
Default is TRUE.}

\item{filename}{character string for saving plots:
- Specify name without extension
- Plots saved as both PNG and PDF in 'img/' directory
- NULL/FALSE for no file output}

\item{print}{logical; controls plot display:
- TRUE: displays the plot
- FALSE: creates but doesn't display the plot
Default is TRUE.}

\item{legend}{logical; controls legend display:
- TRUE: includes a legend
- FALSE: omits the legend
Default is TRUE.}

\item{reference}{logical; controls reference panel:
- TRUE: includes reference citations panel (requires Reference column)
- FALSE: omits reference panel
- Automatically set to FALSE if Reference column missing/empty
Default is TRUE.}

\item{title}{character string for main plot title:
- NULL/FALSE for no title}

\item{subtitle}{character string for plot subtitle:
- NULL/FALSE for no subtitle}

\item{subfig_title}{controls subplot titles in multi-panel plots:
- TRUE: uses default titles (Variable or Country names)
- FALSE: no subplot titles
- Character vector: custom titles (length must match number of panels)
- Ignored for single panel plots
Default is TRUE.}

\item{verbose}{logical; controls information messages:
- TRUE: prints processing information
- FALSE: suppresses information messages
Default is TRUE.}

\item{debug}{logical; controls debugging output:
- TRUE: prints detailed debugging information
- FALSE: suppresses debugging information
Default is FALSE.}

\item{size}{numeric or NULL; controls plot dimensions:
- 1: small (10x7 inches)
- 2: medium (15x7 inches)
- 3: large (15x10 inches)
- 4: extra large (20x10 inches)
- NULL: auto-sizes based on data}

\item{theme}{list}

\item{bg}{character; controls plot background color:
- "transparent": transparent background (default)
- Any valid color string: sets background to that color}
}
\value{
A ggplot2 object containing the time series plot
}
\description{
Creates time series plots with support for single or multiple indicators,
single or multiple countries, stacked area plots, dual axes, and various visual
customizations (e.g., references and legend).
The function automatically determines the most appropriate plot type
based on the input data structure and specified parameters.
}
\details{
The function automatically selects the appropriate plotting implementation based on
the data structure and parameters:
\itemize{
\item Single country, multiple indicators:
\itemize{
\item Basic line plot (default)
\item Stacked area plot (if area = TRUE)
\item Dual axis plot (if right_axis specified)
}
\item Multiple countries, single indicator:
\itemize{
\item Multi-line plot with color-coded countries
}
\item Multiple countries, multiple indicators:
\itemize{
\item Faceted plot by indicator (if by_indicator = TRUE)
\item Faceted plot by country (if by_indicator = FALSE)
}
}

The function includes multiple features for customization:
\itemize{
\item Automatic axis scaling and formatting
\item Event markers with customizable labels
\item Reference panel for data sources
\item Flexible legend positioning
\item Consistent theme across all plot types
}
}
\examples{
# Basic time series for one country and multiple indicators
data <- data.frame(
  Date = rep(seq(as.Date("2000-01-01"), as.Date("2020-01-01"), by = "year"), 2),
  ISO = "FRA",
  Variable = rep(c("GDP", "Inflation"), each = 21),
  Value = c(rnorm(21, 2, 0.5), rnorm(21, 3, 1)),
  Reference = "World Bank"
)
pp_plot_series(data, y_axis = "Percent")

# Dual axis plot with manual axis assignment
pp_plot_series(data, 
               y_axis = c("GDP Growth (\%)", "Inflation (\%)"),
               right_axis = "Inflation")

# Stacked area plot
pp_plot_series(data, 
               y_axis = "Percent",
               area = TRUE)

# Multiple countries with event markers
data_multi <- data.frame(
  Date = rep(seq(as.Date("2000-01-01"), as.Date("2020-01-01"), by = "year"), 4),
  ISO = rep(c("FRA", "DEU"), each = 42),
  Variable = rep(rep(c("GDP", "Inflation"), each = 21), 2),
  Value = rnorm(84, 2, 0.5),
  Reference = "World Bank"
)
events <- data.frame(
  Event = c("Financial Crisis", "Euro Crisis"),
  Date = as.Date(c("2008-09-15", "2010-05-01"))
)
pp_plot_series(data_multi,
               y_axis = "Percent",
               key_dates = events,
               by_indicator = TRUE)

}
\seealso{
\code{\link{pp_plot_bar}} for bar plots
\code{\link{pp_plot_scatter}} for scatter plots
\code{\link{isomapper::im_from_iso}} for ISO code to country name conversion

Other plotting functions: 
\code{\link{pp_plot_bar}()},
\code{\link{pp_plot_combine}()},
\code{\link{pp_plot_scatter}()}
}
\concept{plotting functions}
